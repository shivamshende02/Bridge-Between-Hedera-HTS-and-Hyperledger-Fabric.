package com.shivam.hedera;

import com.hedera.hashgraph.sdk.*;
import io.github.cdimascio.dotenv.Dotenv;

public class TransferToContract {
    public static void main(String[] args) throws Exception {
        Client client = Client.forTestnet();

        // Load operator (your account, the sender)
        Dotenv dotenv = Dotenv.load();
        PrivateKey operatorKey = PrivateKey.fromString(dotenv.get("OPERATOR_KEY"));
        AccountId operatorId = AccountId.fromString(dotenv.get("OPERATOR_ID"));

        
        client.setOperator(operatorId, operatorKey);

        // Token ID (fungible token you want to send)
        TokenId tokenId = TokenId.fromString("0.0.6460709");

        // Smart contract account ID (converted from your deployed contract’s EVM address)
        //String contractEvmAddress = "0x5623a01f5caf72e55bbb42f49ccd0393a12065646745bff8e5728de883e3d87d"; // your contract address
        AccountId contractAccountId = AccountId.fromString("0.0.7168571");
        // Transfer 10 tokens from your account → contract
        TransferTransaction tx = new TransferTransaction()
        	    .addTokenTransfer(tokenId, client.getOperatorAccountId(), -100) // deduct from you
        	    .addTokenTransfer(tokenId, contractAccountId, 100)              // add to contract
        	    .freezeWith(client)
        	    .sign(operatorKey);


        TransactionResponse response = tx.execute(client);
        TransactionReceipt receipt = response.getReceipt(client);

        System.out.println("✅ Token transfer status: " + receipt.status);
    }
}
